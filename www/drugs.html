<!DOCTYPE html> 
<html> 
<head>
  <meta charset="utf-8" /> 
  <title>Health in Hand</title>
  
  <link href="css/jquery.mobile-1.0a4.1.min.css" rel="stylesheet" />
  <link href="css/theme.css" rel="stylesheet" />
  <link href="css/main.css" rel="stylesheet" />
  
  <!-- Phonegap and JQM init -->
  <script type="text/javascript" charset="utf-8" src="js/phonegap-0.9.4.js"></script>
  <script type="text/javascript" charset="utf-8" src="js/jquery-1.5.2.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.0a4.1.min.js"></script>
  
  <!-- Utilities -->
  <script type="text/javascript" charset="utf-8" src="js/utils.js"></script>
  <script type="text/javascript" charset="utf-8" src="js/names.js"></script>
  
  <!-- API communication -->
  <script type="text/javascript" charset="utf-8" src="js/api.js"></script>
  <script type="text/javascript" charset="utf-8" src="js/keys.js"></script>
  
</head> 
<body> 

<div data-role="page" class="page" id="drugs">

  <!-- Page-specific code -->
  <script type="text/javascript">
    Utils.show("drugs", function() {
      
      $("input.search.drugs").keyup(function() {
        var query = $("input.search.drugs").val();
        if (!query) {
          $("ul.list.drug_terms").html("");
          return;
        }
        
        Api.Drug.terms(query, function(terms) {
          Utils.loadList("drug_terms", terms, function(term) {
            var link;
            if (term.term_type == "drug_class")
              link = "drug_class.html?" + $.param({drug_class: term.drug_class});
            else if (term.term_type == "drug") {
              link = "drug_chemical.html?" + $.param({
                drug_name: term.drug,
                name: term.chemical,
                drug_class: term.drug_class,
                subdivision: term.subdivision
              });
            } else { // term.term_type == "chemical"
              link = "drug_chemical.html?" + $.param({
                name: term.chemical,
                drug_class: term.drug_class,
                subdivision: term.subdivision
              });
            } 
            
            return "" +
              "<a href=\"" + link + "\">" +
                "<h3>" +
                  term.term +
                "</h3>" +
              "</a>";
          }, {empty: "Start typing to see a list of terms."});
        });
        
      });
    });
  </script>

  <!--<div data-role="header">
    <h1>Health in Hand</h1>
    <a href="index.html" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-right jqm-home">Home</a>
  </div>--> <!--/header -->

  <div data-role="content">
    <div class="content-banner">
      <a href="about.html" class="info">About</a>
	
      <h1>Sunlight Health</h1>
      <p>
        Have a prescription to fill? See what your options are.
      </p>
    </div>
	<div class="scallop">
		
	</div>
    
    <script type="text/javascript" charset="utf-8" src="js/jquery-placehold-0.3.min.js"></script>
    <input class="search drugs text" type="text" name="query" placeholder="Start typing a class, chemical, or drug" />
    <div class="autosearch_results">
	    <ul data-role="listview" data-theme="e" class="list drug_terms">
	      <!-- term list goes here, template specified in JavaScript above -->
	    </ul>
	    <p class="loading empty drug_terms"></p>
	</div>

  </div><!-- /content -->
  	<div data-role="footer" data-position="fixed" data-id="stickey_footer" id="stickey_footer">
		<div data-role="navbar">
			<ul>
				<li><a href="facilities.html" data-icon="nav-icons" id="facilities_nav">Facilities</a></li>
				<li><a href="suppliers.html" data-icon="nav-icons" id="suppliers_nav" >Suppliers</a></li>
				<li><a href="drugs.html" data-icon="nav-icons" id="drugs_nav" class="ui-btn-active ui-state-persist">Drugs</a></li>
			</ul>
		</div><!-- /navbar -->

  </div><!-- /footer -->
</div><!-- /page -->

</body>
</html>