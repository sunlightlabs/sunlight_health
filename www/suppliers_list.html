<!DOCTYPE html> 
<html> 
<head>
  <meta charset="utf-8" /> 
  <title>Health in Hand</title>
  
  <link href="css/jquery.mobile-1.0a4pre.css" rel="stylesheet" />
  <link href="css/main.css" rel="stylesheet" />
  
  <!-- Phonegap and JQM init -->
  <script type="text/javascript" charset="utf-8" src="js/phonegap-0.9.4.js"></script>
  <script type="text/javascript" charset="utf-8" src="js/jquery-1.5.1.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.0a4pre.min.js"></script>
  
  <!-- Utilities -->
  <script type="text/javascript" charset="utf-8" src="js/utils.js"></script>
  
  <!-- API communication -->
  <script type="text/javascript" charset="utf-8" src="js/api.js"></script>
  <script type="text/javascript" charset="utf-8" src="js/keys.js"></script>
</head>
<body> 

<div data-role="page" class="page" id="suppliers_list">

  <!-- Page-specific code -->
  <script type="text/javascript">
    Utils.show("suppliers_list", function() {
    
      var lat = Utils.param("lat");
      var lng = Utils.param("lng");
      
      $.mobile.pageLoading();
      Api.Supplier.search(lat, lng, function(suppliers) {
        $.mobile.pageLoading(true);
        
        Utils.loadList("suppliers", suppliers, function(supplier) {
          return "<h3>" +
              "<a href=\"supplier_detail.html?row=" + supplier.row + "\">" + supplier.name + "</a>" +
            "</h3>" +
            "<p>" + 
              supplier.address + "<br/>" +
              supplier.city + ", " + supplier.state + " " + supplier.zip +
            "</p>";
        }, "No suppliers found for this location.");
        
      });
      
    });
  </script>

  <div data-role="header">
    <h1>Suppliers Near You</h1>
    <a href="index.html" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-right jqm-home">Home</a>
  </div><!-- /header -->

  <div data-role="content"> 
    <p class="loading empty suppliers">Loading suppliers...</p>
    
    <ul data-role="listview" data-theme="c" class="list suppliers">
      <!-- fill in suppliers here -->
    </ul>
  </div><!-- /content -->

  <div data-role="footer">
    
  </div><!-- /footer -->
</div><!-- /page -->

</body>
</html>